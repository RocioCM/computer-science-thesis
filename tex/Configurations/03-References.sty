%%% Bibliografía %%%
\usepackage[
    backend=biber, % Usar el backend biber.
    sorting=nyt, % Ordenar por nombre, año, título (estándar APA).
    style=ieee, % Estilo de citas numérico comprimido.
    citestyle=numeric-comp, % Comprimir citas consecutivas [1,2] en lugar de [1],[2].
    sortcites=true,
    giveninits=false, % Usar iniciales para los nombres de pila.
    natbib=true, % Compatibilidad con natbib.
    maxnames=5, % Mostrar hasta 5 autores antes de usar "et al."
    minnames=1,
]{biblatex}

\setlength\bibitemsep{1.4\itemsep} % Aumentar el espacio entre entradas de la bibliografía.
\setlength\bibhang{0pt} % Eliminar sangría en las entradas de la bibliografía.
\addbibresource{Bibliography/Bibliography.bib} % Cargar el archivo de bibliografía.

% Configuración específica para APA en español
\DeclareLanguageMapping{spanish}{spanish-apa}

% Comando simplificado para URLs que fuerza breaking en más caracteres
\newcommand{\biburl}[1]{
  \begingroup
  \crimsonfont
  \large
  \def\UrlBreaks{\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z\do\0\do\1\do\2\do\3\do\4\do\5\do\6\do\7\do\8\do\9\do\/\do\-\do\.\do\:\do\?\do\&\do\=\do\_\do\%\do\~\do\+\do\,\do\;\do\!\do\(\do\)\do\[\do\]\do\{\do\}\do\|\do\>\do\<\do\'\do\"\do\@\do\#\do\$}%
  \Urlmuskip=0mu plus 1mu minus 1mu
  \urlstyle{same}
  \url{#1}
  \endgroup
} 

% Redefinir formatos específicos para campos problemáticos
\DeclareFieldFormat{issn}{ISSN\space#1}
\DeclareFieldFormat{isbn}{ISBN\space#1}
\DeclareFieldFormat{url}{\biburl{#1}}
\DeclareFieldFormat{doi}{\biburl{https://doi.org/#1}}

